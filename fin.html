<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Un Último Mensaje</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c1427; /* Azul Medianoche Oscuro */
            color: #E0E7FF; /* Texto claro azulado */
            overflow-x: hidden; /* Evita scroll horizontal */
        }
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        /* --- Fondo de Universo Animado --- */
        @keyframes move-twink-back {
            from {background-position:0 0;}
            to {background-position:-10000px 5000px;}
        }
        .stars, .twinkling {
            position:fixed;
            top:0;
            left:0;
            right:0;
            bottom:0;
            width:100%;
            height:100%;
            display:block;
        }
        .stars {
            background:#0c1427 url(https://www.transparenttextures.com/patterns/stardust.png) repeat top center;
            z-index:-2;
        }
        .twinkling {
            background:transparent url(https://www.transparenttextures.com/patterns/twinkles.png) repeat top center;
            z-index:-1;
            animation:move-twink-back 200s linear infinite;
        }
        
        /* --- Animación de Estrellas Fugaces --- */
        .shooting-star {
            position: absolute;
            height: 2px;
            background: linear-gradient(-45deg, rgba(191, 219, 254, 1), rgba(191, 219, 254, 0));
            border-radius: 999px;
            filter: drop-shadow(0 0 6px rgba(191, 219, 254, 0.7));
            animation: shooting-star-animation 3s linear infinite;
        }

        @keyframes shooting-star-animation {
            0% { transform: translateX(0) translateY(0) rotate(-45deg); opacity: 1; width: 0; }
            70% { opacity: 1; }
            100% { transform: translateX(-100vw) translateY(100vh) rotate(-45deg); opacity: 0; width: 200px; }
        }
        
        .content-section {
            background: linear-gradient(to bottom, rgba(12, 20, 39, 0.7), rgba(12, 20, 39, 0.9));
            backdrop-filter: blur(2px);
        }

        .video-responsive {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding-top: 56.25%;
            border-radius: 0.5rem;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        .video-responsive iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        .constellation-bg {
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png');
            background-color: rgba(12, 20, 39, 0.5);
            border: 1px solid rgba(99, 102, 241, 0.2);
            padding: 2rem;
            border-radius: 0.5rem;
        }

        /* --- Estilos del Carrusel de Videos --- */
        .video-carousel .slide {
            display: none;
            animation: fadeEffect 0.8s;
        }
        @keyframes fadeEffect {
            from {opacity: .4} 
            to {opacity: 1}
        }
        .carousel-btn {
            transition: background-color 0.3s ease;
        }
    </style>
</head>
<body>

    <!-- Capas de la animación del universo -->
    <div class="stars"></div>
    <div class="twinkling"></div>
    <div id="shooting-stars-container" class="absolute top-0 left-0 w-full h-full overflow-hidden"></div>

    <div id="main-content" class="relative z-10">
        <section class="content-section py-20 px-4 min-h-screen flex items-center">
            <main class="w-full max-w-3xl mx-auto text-center">
                
                <!-- Sección para desbloquear el poema -->
                <div id="poem-lock" class="mb-16 border-b border-indigo-800 pb-10">
                    <h2 class="text-4xl font-bold text-white mb-4">Un poema secreto para ti</h2>
                    <p class="text-indigo-200 mb-6 max-w-lg mx-auto">Para leerlo, completa la frase con la respuesta correcta:</p>
                    <div class="bg-gray-900/50 p-6 rounded-lg max-w-md mx-auto">
                        <p class="text-lg italic text-indigo-300 mb-4">"y en un mundo lleno de oceanos, lo unico que necesito es un..."</p>
                        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                            <input type="text" id="unlock-input" class="bg-gray-800 border border-indigo-500 text-white text-center text-lg rounded-lg p-2 w-full sm:w-auto flex-grow focus:ring-2 focus:ring-indigo-400 focus:outline-none" placeholder="Escribe aquí...">
                            <button id="unlock-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300 w-full sm:w-auto">
                                Revelar
                            </button>
                        </div>
                        <p id="error-msg" class="text-red-400 mt-4 h-5"></p>
                    </div>
                </div>

                <!-- Poema Oculto -->
                <div id="poem-content" class="hidden mb-16 border-b border-indigo-800 pb-10">
                    <div class="constellation-bg">
                        <h3 class="text-3xl font-bold text-white mb-6 text-center">El Atlas de Tu Cuerpo</h3>
                        <div class="italic text-indigo-100 space-y-4 text-center max-w-md mx-auto">
                            <p>Marifer, eres un lienzo que anhelo explorar. Con tus lentes, que enmarcan esa mirada inteligente y sexy. Con el pelo despeinado en una tormenta perfecta, o peinada, como una calma que me invita a naufragar.</p>
                            <p>Deseo la cartografía de tu piel, ser el único que descifre el mapa de tus lunares. Quiero memorizar la curva de tu cintura y la línea de tu mandíbula, donde mis besos encuentran su lugar.</p>
                            <p>Tu cuerpo es un idioma que hablo en susurros, una obra de arte que no necesita museo. Eres la tentación hecha silueta, la única galaxia donde quiero perderme, la dueña de todo mi deseo.</p>
                        </div>
                    </div>
                </div>

                <!-- Videos de Marvel -->
                <div id="marvel-section" class="mt-16">
                    <h2 class="text-4xl font-bold text-white mb-12">Ecos de Nuestro Universo</h2>
                    <div class="w-full max-w-xl mx-auto relative video-carousel">
                        <!-- Slides del carrusel -->
                        <div class="slide">
                            <div class="video-responsive shadow-2xl mx-auto"><iframe title="Marvel Video 1" src="/video/1. Tus locuras van con las mias.mp4" allowfullscreen></iframe></div>
                            <p class="text-base italic text-indigo-200 mt-4 px-4">"Tus locuras van con las mías... Como Deadpool, solo quiero compartir cada tontería y cada momento a tu lado, Marifer."</p>
                        </div>
                        <div class="slide">
                            <div class="video-responsive shadow-2xl mx-auto"><iframe title="Marvel Video 2" src="/video/2. eresmicamino.mp4" allowfullscreen></iframe></div>
                            <p class="text-base italic text-indigo-200 mt-4 px-4">"Tú eres mi camino... Como Peter mira a Gwen, así te miro a ti. Eres mi rumbo, mi razón y todo mi mundo."</p>
                        </div>
                        <div class="slide">
                            <div class="video-responsive shadow-2xl mx-auto"><iframe title="Marvel Video 3" src="/video/3. LOKI.mp4" allowfullscreen></iframe></div>
                            <p class="text-base italic text-indigo-200 mt-4 px-4">"Solo quiero que estés bien... Como Loki a Sylvie, es lo único que deseo para ti, Marifer. Sin condiciones."</p>
                        </div>
                        <div class="slide">
                            <div class="video-responsive shadow-2xl mx-auto"><iframe title="Marvel Video 4" src="/video/4. Yo te amo en todos los universos.mp4" allowfullscreen></iframe></div>
                            <p class="text-base italic text-indigo-200 mt-4 px-4">"Te amo en todos los multiversos... Tal como Strange a Christine, te lo digo yo: en cada realidad posible, te amaría igual."</p>
                        </div>
                        <div class="slide">
                            <div class="video-responsive shadow-2xl mx-auto"><iframe title="Marvel Video 5" src="/video/5. Iroman.mp4" allowfullscreen></iframe></div>
                            <p class="text-base italic text-indigo-200 mt-4 px-4">"Voy a soñar contigo... Como Tony con Pepper, siempre serás mi último pensamiento antes de dormir."</p>
                        </div>

                        <!-- Botones de navegación -->
                        <button class="carousel-btn absolute top-1/2 left-0 -translate-y-1/2 -translate-x-12 bg-indigo-500/50 hover:bg-indigo-500/80 text-white p-3 rounded-full" onclick="changeSlide(-1)">
                            &#10094;
                        </button>
                        <button class="carousel-btn absolute top-1/2 right-0 -translate-y-1/2 translate-x-12 bg-indigo-500/50 hover:bg-indigo-500/80 text-white p-3 rounded-full" onclick="changeSlide(1)">
                            &#10095;
                        </button>
                    </div>
                </div>

                <!-- Mensaje Final -->
                <div id="final-message" class="mt-16 border-t border-indigo-800 pt-10">
                    <h2 class="text-5xl font-bold text-white mb-6">¡Feliz Cumpleaños, Marifer!</h2>
                    <div class="text-lg text-indigo-100 space-y-4 max-w-2xl mx-auto">
                        <p>Te deseo toda la felicidad que el universo pueda contener. Que cada día te traiga una nueva razón para sonreír y que cumplas cada sueño que guardas en tu corazón. Quiero que viajes, que rías a carcajadas, que te comas el mundo y que nunca dejes de brillar con esa luz tan tuya.</p>
                        <p>Y aunque el destino a veces escriba guiones que no esperamos, y nuestros caminos no siempre corran en paralelo, quiero que sepas que siempre, sin importar nada, voy a querer lo mejor para ti. Siempre serás esa historia increíble que contaré con una sonrisa, ese recuerdo que guardaré con más cariño.</p>
                        <p class="font-bold text-indigo-300 mt-4">Siempre serás mi persona favorita.</p>
                    </div>
                    <div class="mt-12">
                        <a href="epilogo.html" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300 inline-block">
                            Y una última cosa...
                        </a>
                    </div>
                </div>

            </main>
        </section>
    </div>

    <script>
        const unlockInput = document.getElementById('unlock-input');
        const unlockBtn = document.getElementById('unlock-btn');
        const errorMsg = document.getElementById('error-msg');
        const poemLock = document.getElementById('poem-lock');
        const poemContent = document.getElementById('poem-content');

        unlockBtn.addEventListener('click', () => {
            if (unlockInput.value.trim().toLowerCase() === 'charquito de ti') {
                poemLock.style.transition = 'opacity 0.5s';
                poemLock.style.opacity = 0;
                setTimeout(() => {
                    poemLock.classList.add('hidden');
                }, 500);
                
                poemContent.classList.remove('hidden');
                poemContent.style.opacity = 0;
                setTimeout(() => {
                    poemContent.style.transition = 'opacity 1s';
                    poemContent.style.opacity = 1;
                }, 600);
            } else {
                errorMsg.textContent = 'Esa no es la respuesta... Inténtalo de nuevo.';
                unlockInput.classList.add('shake');
                setTimeout(() => {
                    errorMsg.textContent = '';
                    unlockInput.classList.remove('shake');
                }, 2000);
            }
        });

        // --- Creación dinámica de estrellas fugaces ---
        const starsContainer = document.getElementById('shooting-stars-container');
        const numberOfStars = 7; 
        for (let i = 0; i < numberOfStars; i++) {
            const star = document.createElement('div');
            star.className = 'shooting-star';
            star.style.top = `${Math.random() * 50 - 25}vh`; 
            star.style.left = `${Math.random() * 100 + 100}vw`;
            star.style.animationDelay = `${Math.random() * 7}s`;
            star.style.animationDuration = `${Math.random() * 2 + 3}s`;
            starsContainer.appendChild(star);
        }

        // --- Lógica del Carrusel ---
        let slideIndex = 1;
        showSlide(slideIndex);

        function changeSlide(n) {
            showSlide(slideIndex += n);
        }

        function showSlide(n) {
            let i;
            const slides = document.getElementsByClassName("slide");
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slides[slideIndex-1].style.display = "block";
        }
    </script>

</body>
</html>
